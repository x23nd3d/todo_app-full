(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{27:function(e,t,a){e.exports=a(50)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),c=a.n(o),s=a(4),i=a(5),l=a(7),u=a(6),m=a(19),d=a(12),p=a(13),f=(a(32),a(1)),h=a.n(f),g=a(11),v=function(){function e(){Object(s.a)(this,e),this._apiBase="http://176.104.6.131:3000/api"}return Object(i.a)(e,[{key:"authUser",value:function(){var e=Object(g.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"checkIfAuth",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/auth/check"),{method:"POST",headers:{Authorization:"".concat(sessionStorage.getItem("API"))}});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(sessionStorage.getItem("API"))+", received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addItem",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/todo/add"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"".concat(sessionStorage.getItem("API"))}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(this._apiBase,"/todo/add")+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/todo/show"),{method:"GET",headers:{Authorization:"".concat(sessionStorage.getItem("API"))}});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(this._apiBase,"/todo/add")+", received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getResource",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPeople",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/people/");case 2:return t=e.sent,e.abrupt("return",t.results.map(this._transformPerson));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPerson",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/people/".concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",this._transformPerson(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPlanets",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/planets/");case 2:return t=e.sent,e.abrupt("return",t.results.map(this._transformPlanet));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPlanet",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/planets/".concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",this._transformPlanet(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllStarships",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/starships/");case 2:return t=e.sent,e.abrupt("return",t.results.map(this._transformStarship));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStarship",value:function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getResource("/starships/".concat(t,"/")),e.abrupt("return",this._transformStarship(a));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_extractId",value:function(e){return e.url.match(/\/([0-9]*)\/$/)[1]}},{key:"_transformPlanet",value:function(e){return{id:this._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter}}},{key:"_transformStarship",value:function(e){return{id:this._extractId(e),name:e.name,model:e.model,manufacturer:e.manufacturer,costInCredits:e.costInCredits,length:e.length,crew:e.crew,passengers:e.passengers,cargoCapacity:e.cargoCapacity}}},{key:"_transformPerson",value:function(e){return{id:this._extractId(e),name:e.name,gender:e.gender,birthYear:e.birthYear,eyeColor:e.eyeColor}}}]),e}(),b=(a(34),a(2)),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={loginPageActive:!0},e.toggleLoginPage=function(){"false"===localStorage.getItem("loginForm")&&e.setState((function(e){return{loginPageActive:!e.loginPageActive,connected:!e.connected}}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.toggleLoginPage()}},{key:"render",value:function(){var e=this.state.loginPageActive,t=e?r.a.createElement("div",{className:"overlay"}):null,a=e?r.a.createElement(L,{connection:this.toggleLoginPage}):null;return r.a.createElement(r.a.Fragment,null,t,a)}}]),a}(n.Component),w=a(16),y=(a(35),function(e){var t=e.todo,a=e.done,n=r.a.createElement("h2",null,t," more to do, ",a," done");return r.a.createElement("div",{className:"app-header d-flex"},r.a.createElement("h1",null,"Todo List"),n)}),O=(a(36),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={term:""},e.onChangeTerm=function(t){var a=t.target.value;return e.setState({term:a}),e.props.onSearch(a)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.term;return r.a.createElement("input",{type:"text",className:"form-control search-input",placeholder:"type to search",onChange:this.onChangeTerm,value:e})}}]),a}(n.Component)),j=a(26),k=(a(37),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.onToggleDone,n=e.done,o=e.important,c=e.onToggleImportant,s=e.onRemove,i="todo-list-item";return n&&(i+=" done"),o&&(i+=" important"),r.a.createElement("span",{className:i},r.a.createElement("span",{className:"todo-list-item-label",onClick:a},t),r.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-sm float-right",onClick:c},r.a.createElement("i",{className:"fa fa-exclamation"})),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm float-right",onClick:s},r.a.createElement("i",{className:"fa fa-trash-o"})))}}]),a}(n.Component)),I=(a(38),function(e){var t=e.todos,a=e.toggleDone,n=e.toggleImportant,o=e.onRemove,c=t.map((function(e){var t=e._id,c=Object(j.a)(e,["_id"]);return r.a.createElement("li",{key:t,className:"list-group-item"},r.a.createElement(k,Object.assign({},c,{onToggleDone:function(){return a(t)},onToggleImportant:function(){return n(t)},onRemove:function(){return o(t)}})))}));return r.a.createElement("ul",{className:"list-group todo-list"},c)}),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.updateFilter,a=e.filter,n=[{state:"all",label:"All"},{state:"active",label:"Active"},{state:"done",label:"Done"}].map((function(e){var n=e.state,o=e.label,c=a===n?"btn btn-info":"btn btn-outline-secondary";return r.a.createElement("button",{key:n,type:"button",className:c,onClick:function(){return t(n)}},o)}));return r.a.createElement("div",{className:"btn-group"},n)}}]),a}(n.Component),N=(a(39),a(17)),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={label:""},e.getItem=function(t){var a=t.target.value;e.setState({label:a})},e.addItem=function(t){t.preventDefault(),0===e.state.label.length?N.error("Please type your TODO first."):(e.props.onAddItem(e.state.label),e.setState({label:""}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.label;return r.a.createElement("form",{className:"add-new-item d-flex",onSubmit:this.addItem},r.a.createElement("input",{type:"text",className:"form-control inp",placeholder:"What needs to be done?",value:e,onChange:this.getItem}),r.a.createElement("button",{className:"btn btn-outline-secondary"},"Add Item"))}}]),a}(n.Component),P=(a(42),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"loadingio-spinner-eclipse-2qjsfm5p6un"},r.a.createElement("div",{className:"ldio-uasgcxvbgn"},r.a.createElement("div",null))))}),_=(a(43),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),e=t.call(this);a(17);return e.todoService=new v,e.state={todoData:[],term:"",filter:"all"},e.getData=function(){e.todoService.getItems().then((function(t){var a=t.todos;a?e.setState({todoData:a}):console.log(a,"no TodoData")}))},e.toggleProperty=function(e,t,a){var n=e.findIndex((function(e){return e._id===t})),r=e[n],o=Object(p.a)(Object(p.a)({},r),{},Object(d.a)({},a,!r[a]));return[].concat(Object(w.a)(e.slice(0,n)),[o],Object(w.a)(e.slice(n+1)))},e.onToggleDone=function(t){e.setState((function(a){var n=a.todoData;return{todoData:e.toggleProperty(n,t,"done")}}))},e.onToggleImportant=function(t){e.setState((function(a){var n=a.todoData;return{todoData:e.toggleProperty(n,t,"important")}}))},e.removeItem=function(t){e.setState((function(e){var a=e.todoData,n=a.findIndex((function(e){return e.id===t}));return{todoData:[].concat(Object(w.a)(a.slice(0,n)),Object(w.a)(a.slice(n+1)))}}))},e.search=function(e,t){return e?t.filter((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1})):t},e.updateTerm=function(t){e.setState({term:t})},e.addItem=function(t){var a=e.createTodo(t);e.todoService.addItem(a).then((function(t){var a=t.todos;e.setState({todoData:a})}))},e.filter=function(e,t){switch(e){case"all":return t;case"active":return t.filter((function(e){return!e.done}));case"done":return t.filter((function(e){return e.done}));default:return t}},e.updateFilter=function(t){e.setState({filter:t})},e}return Object(i.a)(n,[{key:"createTodo",value:function(e){return{label:e,done:!1,important:!1}}},{key:"componentWillMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state,t=e.todoData,a=e.term,n=e.filter,o=this.filter(n,this.search(a,t)),c=t.filter((function(e){return e.done})).length,s=t.length-c,i=t.length>0||null?r.a.createElement(I,{todos:o,toggleDone:this.onToggleDone,toggleImportant:this.onToggleImportant,onRemove:this.removeItem}):r.a.createElement(P,null);return r.a.createElement("div",{className:"todo-app"},r.a.createElement(y,{todo:s,done:c}),r.a.createElement("div",{className:"top-panel d-flex"},r.a.createElement(O,{onSearch:this.updateTerm}),r.a.createElement(S,{updateFilter:this.updateFilter,filter:n})),i,r.a.createElement(x,{onAddItem:this.addItem}))}}]),n}(n.Component)),C=function(){return r.a.createElement(_,null)},A=function(e){return e?(console.log("WORKING!!!"),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/dashboard",exact:!0},r.a.createElement(C,null)),r.a.createElement(b.a,{to:"/dashboard"}))):r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/auth",exact:!0},r.a.createElement(E,null)),r.a.createElement(b.a,{to:"/auth"}))},D=a(17),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).todoService=new v,e.state={active:!0,singIn:!1,register:{name:"",email:"",password:"",passwordRepeat:""},login:{email:"",password:""}},e.changeMode=function(){e.setState((function(e){return{singIn:!e.singIn}}))},e.setValue=function(t){var a,n=t.target.value,r=Object(p.a)(Object(p.a)({},e.state.register),{},(a={},Object(d.a)(a,t.target.name,n),Object(d.a)(a,t.target.name,n),Object(d.a)(a,t.target.name,n),Object(d.a)(a,t.target.name,n),a));e.setState((function(e){e.register;return{register:r}}))},e.sendData=function(t){t.preventDefault(),window.location="/#submit";var a=e.state.register,n=a.password,r=a.passwordRepeat,o=a.email;if(!(n===r))return D.error("Passwords should be the same.");if(!o.includes("@")||!o.includes("."))return D.warning("Please type the proper email address.");var c=e.todoService.authUser("/auth/signup",e.state.register).then((function(e){var t=e.status,a=e.text;if("failure"===t&&"registered:true"===a)return D.warning("Such email is already registered, please Log in to your account.");D.success("User has been registered. Please Log in to your account."),window.location="/auth",console.log(e),setTimeout((function(){window.location.reload()}),2e3)}));console.log(c)},e.getValue=function(t){var a,n=t.target.value,r=Object(p.a)(Object(p.a)({},e.state.login),{},(a={},Object(d.a)(a,t.target.name,n),Object(d.a)(a,t.target.name,n),a));e.setState((function(e){e.login;return{login:r}}))},e.getData=function(t){t.preventDefault();var a=e.state.login.email;if(!a.includes("@")||!a.includes("."))return D.warning("Please type the proper email address.");var n=e.todoService.authUser("/auth/login",e.state.login).then((function(t){var a=t.status,n=t.text;if("failure"===a||"notfound"===n)return D.warning("Such user does not exist. Please try again.");var r=t.status,o=t.token,c=t.userId,s=(c.email,c.name),i=(c.todo,e.props.connection);"Success"===r&&void 0!==o&&(D.success("Welcome on board, ".concat(s)),setTimeout((function(){sessionStorage.setItem("API",o),A(!!o),localStorage.setItem("loginForm","false"),i(),window.location="/dashboard"}),800)),console.log(t)}));console.log(n)},e}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a=this.state,n=a.singIn,o=a.register,c=a.login;return n?(t="I have an account",e=r.a.createElement(R,{values:this.setValue,states:o,data:this.sendData})):(t="I would like to be a member",e=r.a.createElement(F,{values:this.getValue,states:c,data:this.getData})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"signup__container animate__animated animate__backInDown"},r.a.createElement("div",{className:"container__child signup__thumbnail"},r.a.createElement("div",{className:"thumbnail__logo"},r.a.createElement("h1",{className:"logo__text"},"Todo List")),r.a.createElement("div",{className:"thumbnail__content center"},r.a.createElement("h1",{className:"heading--primary"},"Welcome to the application."),r.a.createElement("h4",{className:"heading--secondary"},"Are you ready to create your first todo?")),r.a.createElement("ul",{className:"list-inline"},r.a.createElement("li",null,r.a.createElement("a",{id:"go",href:"#",className:"btn signup__link",onClick:this.changeMode},t))),r.a.createElement("div",{className:"signup__overlay-2"})),r.a.createElement("div",{className:"container__child signup__form"},e)))}}]),a}(n.Component),R=function(e){var t=e.values,a=e.states,n=e.data,o=a.name,c=a.email,s=a.password,i=a.passwordRepeat;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{action:"#",onSubmit:n},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{className:"form-control",type:"text",name:"name",value:o,onChange:t,id:"name",placeholder:"Your name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:"form-control",type:"text",name:"email",value:c,onChange:t,id:"email",placeholder:"Your email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"password",value:s,onChange:t,id:"password",placeholder:"********",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"passwordRepeat"},"Repeat Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"passwordRepeat",value:i,onChange:t,id:"passwordRepeat",placeholder:"********",required:!0})),r.a.createElement("div",{className:"m-t-lg"},r.a.createElement("ul",{className:"list-inline"},r.a.createElement("li",null,r.a.createElement("input",{className:"btn btn--form",type:"submit",value:"Register"}))))))},F=function(e){var t=e.values,a=e.states,n=e.data,o=a.email,c=a.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{action:"#",onSubmit:n,className:"signInForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:"form-control",type:"text",name:"email",value:o,onChange:t,id:"email",placeholder:"Your email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"password",value:c,onChange:t,id:"password",placeholder:"********",required:!0})),r.a.createElement("div",{className:"m-t-lg"},r.a.createElement("ul",{className:"list-inline"},r.a.createElement("li",null,r.a.createElement("input",{className:"btn btn--form",type:"submit",value:"Sign in"}))))))},L=T,B=(a(49),sessionStorage.getItem("API")),q=A(!!B),W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),e=t.call(this);a(17);return e.todoService=new v,e.state={loginPageActive:!0,connected:!1},e.toggleLoginPage=function(){"false"===localStorage.getItem("loginForm")&&e.setState((function(e){return{loginPageActive:!e.loginPageActive,connected:!e.connected}}))},e.logOut=function(){sessionStorage.clear(),localStorage.clear(),e.setState((function(e){return{loginPageActive:!e.loginPageActive}})),window.location="/auth"},e.checkRoute=function(){!0===e.state.loginPageActive?(console.log(e.state.loginPageActive,"STATE"),window.location="/auth"):window.location="/dashboard"},e.checkIfConnected=function(){setInterval((function(){e.todoService.checkIfAuth().then((function(t){"connected"===t.status?e.setState({connected:!0}):e.setState({connected:!1})}))}),3e3)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.toggleLoginPage()}},{key:"render",value:function(){var e=this.state,t=e.loginPageActive,a=(e.connected,t?null:r.a.createElement(M,{status:this.logOut}));return r.a.createElement(m.a,null,r.a.createElement("div",{className:"todo-app"},a,q))}}]),n}(n.Component),M=function(e){var t=e.status;return r.a.createElement("form",{action:"#",onSubmit:t},r.a.createElement("button",{className:"btn btn-secondary logout"},"Log out"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.33abc62e.chunk.js.map